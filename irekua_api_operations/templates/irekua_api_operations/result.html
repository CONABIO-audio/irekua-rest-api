{% extends 'rest_framework/api.html' %}
{% load i18n %}
{% load rest_framework %}

{% block style %}
{{ block.super }}

<style media="screen">
  .bash {
    padding: 1em;
    background-color: black;
    max-height: 300px;
    overflow-y: auto;
    color: grey;
    font-family: Consolas,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New, monospace;
  }
</style>
{% endblock style %}

{% block content %}
<div class="region"  aria-label="{% trans "request form" %}">
  {% block request_forms %}
  {{ block.super }}
  {% endblock request_forms %}
</div>

<div class="content-main" role="main"  aria-label="{% trans "main content" %}">
  <div class="page-header">
    <h1>{{ name }}</h1>
  </div>
  <div style="float:left">
    {% block description %}
      {{ description }}
    {% endblock %}
  </div>

  {% if paginator %}
    <nav style="float: right">
      {% get_pagination_html paginator %}
    </nav>
  {% endif %}

  <div class="request-info" style="clear: both" aria-label="{% trans "request info" %}">
    <pre class="prettyprint"><b>{{ request.method }}</b> {{ request.get_full_path }}</pre>
  </div>

  <div class="response-info" aria-label="{% trans "response info" %}">
    <pre class="prettyprint"><span class="meta nocode"><b>HTTP {{ response.status_code }} {{ response.status_text }}</b>{% for key, val in response_headers|items %}
<b>{{ key }}:</b> <span class="lit">{{ val|break_long_headers|urlize }}</span>{% endfor %}

</span>{{ content }}</pre>
  </div>

  {% if response.data.stdout %}
  <div class="response-info" aria-label="{% trans "response info stdout" %}">
    <pre class="prettyprint"><span class="meta nocode"><b>STDOUT</b>
    <div class="bash"><span>{{ response.data.stdout }}</span></div></span></pre>
  </div>
  {% endif %}

  {% if response.data.stderr %}
  <div class="response-info" aria-label="{% trans "response info stderr" %}">
    <pre class="prettyprint"><span class="meta nocode"><b>STDERR</b>
    <div class="bash"><span>{{ response.data.stderr }}</span></div></span></pre>
  </div>
  {% endif %}
</div>

{% if post_form or raw_data_post_form %}
  <div {% if post_form %}class="tabbable"{% endif %}>
    {% if post_form %}
      <ul class="nav nav-tabs form-switcher">
        <li>
          <a name='html-tab' href="#post-object-form" data-toggle="tab">HTML form</a>
        </li>
        <li>
          <a name='raw-tab' href="#post-generic-content-form" data-toggle="tab">Raw data</a>
        </li>
      </ul>
    {% endif %}

    <div class="well tab-content">
      {% if post_form %}
        <div class="tab-pane" id="post-object-form">
          {% with form=post_form %}
            <form action="{{ request.get_full_path }}" method="POST" enctype="multipart/form-data" class="form-horizontal" novalidate>
              <fieldset>
                {% csrf_token %}
                {{ post_form }}
                <div class="form-actions">
                  <button class="btn btn-primary js-tooltip" title="Make a POST request on the {{ name }} resource">POST</button>
                </div>
              </fieldset>
            </form>
          {% endwith %}
        </div>
      {% endif %}

      <div {% if post_form %}class="tab-pane"{% endif %} id="post-generic-content-form">
        {% with form=raw_data_post_form %}
          <form action="{{ request.get_full_path }}" method="POST" class="form-horizontal">
            <fieldset>
              {% include "rest_framework/raw_data_form.html" %}
              <div class="form-actions">
                <button class="btn btn-primary js-tooltip" title="Make a POST request on the {{ name }} resource">POST</button>
              </div>
            </fieldset>
          </form>
        {% endwith %}
      </div>
    </div>
  </div>
{% endif %}
{% endblock content %}
